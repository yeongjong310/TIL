# 스코프
식별자를 사용할 수 있는 유효범위이며, 엔진이 식별자를 검색할 때 사용하는 규칙.(변수, 함수 등 모든 식별자를 검색할 때 사용하는 규칙이기 때문)

- 식별자 결정: 엔진이 서로 다른 스코프에서 중복되는 이름을 가진 식별자중 어떤 식별자를 선택할 것인지 결정하는 행위

```
코드의 문맥(context)와 환경

코드가 어디서 실행되며 주변에 어떤 코드가 있는지를 렉시컬 환경이라고 부른다. 즉, 코드의 문맥은 렉시컬 환경으로 이뤄진다. 이를 구현한 것이 실행컨텍스트이며, 코든 코드는 실행 컨텍스트에서 평가되고 실행된다.
```

- 네임스페이스(이름공간) : 개체를 구분할 수 있는 범위를 나타내는 말로 일반적으로 하나의 이름 공간에서는 단 하나의 개체만을 가리키게 된다.

- var는 같은 스코프 내에서 중복 선언을 허용, 하지만 let과 const는 허용하지 않음


## 2.2. 지역과 지역 스코프

-스코프 체인: 전역변수와 지역변수 이름이 동일할 때 지역변수를 사용할 수 있는 이유는 스코프 체인을 통해 참조할 변수를 검색하기 때문이다.

## 3. 스코프 체인


스코프가 계층적으로 최하위 스코프에서 부터 최상위(전역) 스코프까지 연결되는 구조.

**하위 스코프에서 유효한 변수를 상위 스코프에서 절대 참조할 수 없다.**

변수를 참조할 때 자바크스크립트 엔진은 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하여 선언된 변수를 결정한다.

```
렉시컬 환경
스코프 체인은 실행 컨텍스트의 렉시컬 환경을 단방향으로 연결한 것이다. 전역 렉시컬 환경은 코드가 로드되면 곧바로 생성되고, 함수의 렉시컬 환경은 함수가 호출되면 곧바로 생성된다.
```

- 스코프 중첩: 스코프도 함수 처럼 중첩될 수 있다.
- 상위 스코프: 특정 스코프를 기준으로 생각할때 특정 스코프를 포함하는 한단계 위의 스코프(전역 스코프는 최상단 스코프)


- 스코프 체인은 물리적인 실체로 존재한다.
  - 코드를 실행하기 전 렉시컬 환경을 생성(렉시컬 환경은 하위스코프가 상위 스코프로 연결되는 상태)
  - 변수 선언이 실행되면 변수 식별자가 이 자료구조(렉시컬 환경)에 키로 등록된다. 
  - 실행시점에 변수 할당이 일어나면 이 자료구조의 변수 식별자에 해당하는 값을 변경한다.